{"ast":null,"code":"import axios from 'axios';\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM, CART_SAVE_SHIPPING_ADDRESS, CART_LOAD_SHIPPING_ADDRESS } from \"../constants/cartConstants\";\nexport const addToCart = (id, qty) => async (dispatch, getState) => {\n  try {\n    const {\n      data\n    } = await axios.get(`http://127.0.0.1:8000/products/${id}/`);\n    dispatch({\n      type: CART_ADD_ITEM,\n      payload: {\n        product: data._id,\n        name: data.name,\n        image: data.image,\n        price: data.price,\n        countInStock: data.countInStock,\n        qty\n      }\n    });\n    const {\n      cart\n    } = getState();\n    localStorage.setItem('cartItems', JSON.stringify(cart.cartItems || []));\n  } catch (error) {\n    // Handle error\n  }\n};\nexport const removeFromCart = id => (dispatch, getState) => {\n  dispatch({\n    type: CART_REMOVE_ITEM,\n    payload: id\n  });\n  const {\n    cart\n  } = getState();\n  localStorage.setItem('cartItems', JSON.stringify(cart.cartItems || []));\n};\nexport const saveShippingAddress = data => async (dispatch, getState) => {\n  dispatch({\n    type: CART_SAVE_SHIPPING_ADDRESS,\n    payload: data\n  });\n  localStorage.setItem('shippingAddress', JSON.stringify(data));\n  const {\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n  try {\n    await axios.post('/save-shipping/', {\n      ...data,\n      user: userInfo._id\n    });\n  } catch (error) {\n    // Handle error\n  }\n};\nexport const loadShippingAddress = () => dispatch => {\n  const shippingAddressFromStorage = localStorage.getItem('shippingAddress') ? JSON.parse(localStorage.getItem('shippingAddress')) : {};\n  dispatch({\n    type: CART_LOAD_SHIPPING_ADDRESS,\n    payload: shippingAddressFromStorage\n  });\n};","map":{"version":3,"names":["axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_SAVE_SHIPPING_ADDRESS","CART_LOAD_SHIPPING_ADDRESS","addToCart","id","qty","dispatch","getState","data","get","type","payload","product","_id","name","image","price","countInStock","cart","localStorage","setItem","JSON","stringify","cartItems","error","removeFromCart","saveShippingAddress","userLogin","userInfo","post","user","loadShippingAddress","shippingAddressFromStorage","getItem","parse"],"sources":["C:/Users/Mikaela Yumang/OneDrive/Desktop/scratch - Copy/fr/appname/src/actions/cartActions.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM, CART_SAVE_SHIPPING_ADDRESS, CART_LOAD_SHIPPING_ADDRESS } from \"../constants/cartConstants\";\r\n\r\nexport const addToCart = (id, qty) => async (dispatch, getState) => {\r\n  try {\r\n    const { data } = await axios.get(`http://127.0.0.1:8000/products/${id}/`);\r\n  \r\n    dispatch({\r\n        type: CART_ADD_ITEM,\r\n        payload: {\r\n            product: data._id,\r\n            name: data.name,\r\n            image: data.image,\r\n            price: data.price,\r\n            countInStock: data.countInStock,\r\n            qty\r\n        }\r\n    });\r\n\r\n    const { cart } = getState();\r\n    localStorage.setItem('cartItems', JSON.stringify(cart.cartItems || []));\r\n  } catch (error) {\r\n    // Handle error\r\n  }\r\n};\r\n\r\nexport const removeFromCart = (id) => (dispatch, getState) => {\r\n  dispatch({\r\n      type: CART_REMOVE_ITEM,\r\n      payload: id\r\n  });\r\n\r\n  const { cart } = getState();\r\n  localStorage.setItem('cartItems', JSON.stringify(cart.cartItems || []));\r\n};\r\n\r\nexport const saveShippingAddress = (data) => async (dispatch, getState) => {\r\n  dispatch({\r\n      type: CART_SAVE_SHIPPING_ADDRESS,\r\n      payload: data,\r\n  });\r\n\r\n  localStorage.setItem('shippingAddress', JSON.stringify(data));\r\n\r\n  const { userLogin: { userInfo } } = getState();\r\n  try {\r\n    await axios.post('/save-shipping/', { ...data, user: userInfo._id });\r\n  } catch (error) {\r\n    // Handle error\r\n  }\r\n};\r\n\r\nexport const loadShippingAddress = () => (dispatch) => {\r\n  const shippingAddressFromStorage = localStorage.getItem('shippingAddress')\r\n    ? JSON.parse(localStorage.getItem('shippingAddress'))\r\n    : {};\r\n\r\n  dispatch({\r\n    type: CART_LOAD_SHIPPING_ADDRESS,\r\n    payload: shippingAddressFromStorage,\r\n  });\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,EAAEC,gBAAgB,EAAEC,0BAA0B,EAAEC,0BAA0B,QAAQ,4BAA4B;AAEpI,OAAO,MAAMC,SAAS,GAAGA,CAACC,EAAE,EAAEC,GAAG,KAAK,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;EAClE,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMV,KAAK,CAACW,GAAG,CAAE,kCAAiCL,EAAG,GAAE,CAAC;IAEzEE,QAAQ,CAAC;MACLI,IAAI,EAAEX,aAAa;MACnBY,OAAO,EAAE;QACLC,OAAO,EAAEJ,IAAI,CAACK,GAAG;QACjBC,IAAI,EAAEN,IAAI,CAACM,IAAI;QACfC,KAAK,EAAEP,IAAI,CAACO,KAAK;QACjBC,KAAK,EAAER,IAAI,CAACQ,KAAK;QACjBC,YAAY,EAAET,IAAI,CAACS,YAAY;QAC/BZ;MACJ;IACJ,CAAC,CAAC;IAEF,MAAM;MAAEa;IAAK,CAAC,GAAGX,QAAQ,CAAC,CAAC;IAC3BY,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAACK,SAAS,IAAI,EAAE,CAAC,CAAC;EACzE,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd;EAAA;AAEJ,CAAC;AAED,OAAO,MAAMC,cAAc,GAAIrB,EAAE,IAAK,CAACE,QAAQ,EAAEC,QAAQ,KAAK;EAC5DD,QAAQ,CAAC;IACLI,IAAI,EAAEV,gBAAgB;IACtBW,OAAO,EAAEP;EACb,CAAC,CAAC;EAEF,MAAM;IAAEc;EAAK,CAAC,GAAGX,QAAQ,CAAC,CAAC;EAC3BY,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAACK,SAAS,IAAI,EAAE,CAAC,CAAC;AACzE,CAAC;AAED,OAAO,MAAMG,mBAAmB,GAAIlB,IAAI,IAAK,OAAOF,QAAQ,EAAEC,QAAQ,KAAK;EACzED,QAAQ,CAAC;IACLI,IAAI,EAAET,0BAA0B;IAChCU,OAAO,EAAEH;EACb,CAAC,CAAC;EAEFW,YAAY,CAACC,OAAO,CAAC,iBAAiB,EAAEC,IAAI,CAACC,SAAS,CAACd,IAAI,CAAC,CAAC;EAE7D,MAAM;IAAEmB,SAAS,EAAE;MAAEC;IAAS;EAAE,CAAC,GAAGrB,QAAQ,CAAC,CAAC;EAC9C,IAAI;IACF,MAAMT,KAAK,CAAC+B,IAAI,CAAC,iBAAiB,EAAE;MAAE,GAAGrB,IAAI;MAAEsB,IAAI,EAAEF,QAAQ,CAACf;IAAI,CAAC,CAAC;EACtE,CAAC,CAAC,OAAOW,KAAK,EAAE;IACd;EAAA;AAEJ,CAAC;AAED,OAAO,MAAMO,mBAAmB,GAAGA,CAAA,KAAOzB,QAAQ,IAAK;EACrD,MAAM0B,0BAA0B,GAAGb,YAAY,CAACc,OAAO,CAAC,iBAAiB,CAAC,GACtEZ,IAAI,CAACa,KAAK,CAACf,YAAY,CAACc,OAAO,CAAC,iBAAiB,CAAC,CAAC,GACnD,CAAC,CAAC;EAEN3B,QAAQ,CAAC;IACPI,IAAI,EAAER,0BAA0B;IAChCS,OAAO,EAAEqB;EACX,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}